function CreateCKEditor(e){DestroyCKEditor(e), CKEDITOR.replace(e, {on:{instanceReady:function(t){create_template_button("default", e)}, contentDom:function(t){var a = CKEDITOR.instances[e].editable(); a.attachListener(a, "click", function(e){var t = e.data.getTarget(); if (t.hasClass("fa-times-circle")){var a = t.getParents(), n = null; for (let e of a.slice().reverse())if (e.hasClass("container") || e.hasClass("container-fluid")){n = e; break}n && n.remove()}if (t.hasClass("fa-chevron-circle-up")){a = t.getParents(), n = null; for (let e of a.slice().reverse())if (e.hasClass("container") || e.hasClass("container-fluid")){n = e; break}if (n.hasPrevious()){var s = n.getPrevious(); n.insertBefore(s), n.scrollIntoView()}}if (t.hasClass("fa-chevron-circle-down")){a = t.getParents(), n = null; for (let e of a.slice().reverse())if (e.hasClass("container") || e.hasClass("container-fluid")){n = e; break}if (n.hasNext()){var i = n.getNext(); n.insertAfter(i), n.scrollIntoView()}}})}}})}function DestroyCKEditor(e){CKEDITOR.instances[e] && (CKEDITOR.instances[e].destroy(), delete_template_button(e))}function create_template_button(e, t){if (CKEDITOR){var a = CKEDITOR.getTemplates(e), n = ""; a.templates.forEach(function(e){n += "<a class='dropdown-item template_btn' style='cursor:pointer;' data-instances='" + t + "' data-html='" + e.html + "'>", n += "<img style='width:100;height:auto;max-width:100px;margin-left:10px' src='" + a.imagesPath + e.image + "'>", n += e.title, n += "</a>"}), $("#" + t).closest(".row").find(".template_menu").append(n)}}function delete_template_button(e){CKEDITOR && $("#" + e).closest(".row").find(".template_menu").empty()}CKEDITOR.loadTemplates(CKEDITOR.config.templates_files, ""), CKEDITOR.on("instanceReady", function(e){e.editor.document.on("drop", function(e){e.data.preventDefault(!0)})}), $(document).on("click", ".template_btn", function(e){var t = $(this).data("instances"), a = CKEDITOR.instances[t], n = a.getData() + $(this).data("html"); a.setData(n); var s = a.document.getElementsByTag("row").toArray(); for (let e of s.slice().reverse())if (e.hasClass("row")){e.scrollIntoView(); break}}), $(document).on("click", ".clear_template_btn", function(e){var t = $(this).data("target"); for (instance in CKEDITOR.instances)null !== CKEDITOR.instances[instance].name.match(t) && CKEDITOR.instances[instance].setData("")});